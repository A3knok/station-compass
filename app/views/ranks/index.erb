<%= content_for(:title, t('.title')) %>

<div class="page-container">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-md-8 col-lg-6">
        <div class="station-sign-bar mb-3"></div>
        <h2 class="text-center mb-5">
          <i class="fas fa-ranking-star me-2 text-primary"></i>
          <%= t('.title') %>
        </h2>
        <div>
          <table>
            <thead>
              <tr>
                <th>順位</th>
                <th>ルート</th>
                <th>評価数</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <% calculate_rank(@routes).each do |item| %>
                <% route = item[:route]  %>
                <% rank = item[:rank] %>
                <% show_rank = item[:show_rank] %>
                <tr>
                  <td>
                    <% if show_rank %>
                      <span><%= rank %>位</span>
                    <% else %>
                      <span>-</span>
                    <% end %>
                  </td>

                  <td>
                    <span class="text-muted">
                      <i class="fas fa-location-dot text-success me-1"></i>
                      <%= route.gate&.name || "出発地未設定" %>
                      <i class="fas fa-arrow-right mx-2 text-muted"></i>
                      <i class="fas fa-flag-checkered text-danger me-1"></i>
                      <%= route.exit&.display_name || "目的地未設定" %>
                    </span>
                  </td>

                  <td>
                    <span><%= route.helpful_marks_count %></span>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>